<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Enter Access Token</title>
  <style>
    body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; margin: 0; padding: 0; background: #0b0c10; color: #e5e5e5; display: grid; place-items: center; height: 100vh; }
    .card { background: #16181d; border: 1px solid #2f3742; border-radius: 10px; padding: 20px; width: min(420px, 92vw); }
    h1 { margin: 0 0 12px; font-size: 18px; }
    p { color: #9aa4af; font-size: 13px; }
    input, button { width: 100%; background: #0e1116; color: #e5e5e5; border: 1px solid #2f3742; border-radius: 8px; padding: 10px 12px; }
    button { cursor: pointer; margin-top: 10px; }
    .err { color: #ff6b6b; font-size: 12px; height: 16px; margin-top: 8px; }
  </style>
  <script>
    async function submitToken(e) {
      e?.preventDefault();
      const token = document.getElementById('token').value.trim();
      const err = document.getElementById('err');
      err.textContent = '';
      if (!token) { err.textContent = 'Enter token'; return; }
      try {
        const resp = await fetch('/auth/token?token=' + encodeURIComponent(token), { redirect: 'follow', credentials: 'include' });
        if (resp.redirected) {
          location.href = resp.url;
          return;
        }
        if (!resp.ok) {
          err.textContent = 'Invalid token';
          return;
        }
        // If not redirected, go home
        location.href = '/';
      } catch {
        err.textContent = 'Network error';
      }
    }
    window.addEventListener('DOMContentLoaded', () => {
      const urlToken = new URLSearchParams(location.search).get('token');
      if (urlToken) {
        document.getElementById('token').value = urlToken;
      }
      document.getElementById('form').addEventListener('submit', submitToken);
      document.getElementById('go').addEventListener('click', submitToken);
    });
  </script>
  <meta name="robots" content="noindex, nofollow" />
</head>
<body>
  <div class="card">
    <h1>Enter Access Token</h1>
    <p>Paste the server token provided by your administrator to continue.</p>
    <form id="form">
      <input id="token" placeholder="Token" autocomplete="off" autofocus />
      <button id="go" type="submit">Continue</button>
      <div id="err" class="err"></div>
    </form>
  </div>
</body>
</html>


